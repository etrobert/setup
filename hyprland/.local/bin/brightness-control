#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail

if [ $# -eq 0 ]; then
  echo "Usage: brightness-control [up|down]"
  exit 1
fi

DIRECTION=$1

notify_brightness() {
  local percent=$1
  notify-send -h int:value:"$percent" \
    -h string:x-canonical-private-synchronous:brightness \
    "Brightness" "$percent%"
}

# Laptop display - use brightnessctl
if [ "$DIRECTION" = "up" ]; then
  brightnessctl set 10%+
elif [ "$DIRECTION" = "down" ]; then
  brightnessctl set 10%-
fi
PERCENT=$(brightnessctl -m | cut -d, -f4 | tr -d %)
notify_brightness "$PERCENT"
